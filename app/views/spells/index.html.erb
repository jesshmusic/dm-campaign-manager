<div class="admin">
  <%= render "shared/admin-header" %>
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><%= link_to 'Dashboard', dashboard_path %></li>
        <li class="breadcrumb-item active" aria-current="page">Classes</li>
      </ol>
    </nav>

    <h1>Spells</h1>
    <%= render 'shared/search_form', url: spells_path %>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Classes</th>
          <th>School</th>
          <th>Level</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @spells.each do |spell| %>
          <tr>
            <td><%= spell.name %></td>
            <td>
              <% spell.dnd_classes.each_with_index do |dnd_class, index| %>
                <%= link_to dnd_class.name, dnd_class %><% if index != spell.dnd_classes.count - 1 %>,<% end %>
              <% end %>
            </td>
            <td><%= spell.school %></td>
            <td><%= spell.level <= 0 ? 'Cantrip' : spell.level %></td>
            <td><%= link_to 'Show', spell, class: "btn btn-sm btn-primary" %></td>
            <td><%= link_to 'Edit', edit_spell_path(spell), class: "btn btn-sm btn-success" %></td>
            <td><%= link_to 'Destroy', spell, class: "btn btn-sm btn-danger", method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <br>

    <%= link_to 'New Spell', new_spell_path %>
  </div>
</div>
