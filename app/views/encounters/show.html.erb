<% title "Encounter: " + @encounter.name %>
<div class="row">
  <div class="col">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><%= link_to 'Dashboard', dashboard_path %></li>
        <li class="breadcrumb-item"><%= link_to 'Campaigns', campaigns_path %></li>
        <li class="breadcrumb-item"><%= link_to @campaign.name, campaign_adventures_path(@campaign) %></li>
        <li class="breadcrumb-item"><%= link_to @adventure.name, campaign_adventure_path(@campaign, @adventure) %></li>
        <li class="breadcrumb-item active" aria-current="page"><%= @encounter.name %></li>
      </ol>
    </nav>
  </div>
</div>
<div class="container">
  <div class="row mb-3 pb-3 border-bottom">
    <div class="col">
      <h1><strong><%= @encounter.location %>:</strong> <%= @encounter.name %></h1>
      <h2><%= @encounter.xp %> XP</h2>
      <div>
        <%= @encounter.description %>
      </div>
      <div class="my-3">
        <h3>Treasure</h3>
        <%= "#{@encounter.copper_pieces}cp" if @encounter.copper_pieces %>
        <%= "#{@encounter.silver_pieces}sp" if @encounter.silver_pieces %>
        <%= "#{@encounter.electrum_pieces}ep" if @encounter.electrum_pieces %>
        <%= "#{@encounter.gold_pieces}gp" if @encounter.gold_pieces %>
        <%= "#{@encounter.platinum_pieces}pp" if @encounter.platinum_pieces %>
        <h4 class="mt-3 pl-3">Items</h4>
        <ul class="list-group-flush mt-3">
          <% @encounter.equipment_items.each do |equipment_item| %>
            <li class="list-group-item"><%= equipment_item.quantity %>
              <strong><%= equipment_item.items.first.name %></strong></li>
          <% end %>
        </ul>
      </div>
      <% @encounter.encounter_monsters.each do |encounter_monster| %>
        <div class="row">
          <div class="col">
            <h3><%= encounter_monster.number_of_monsters %> <%= encounter_monster.monster.name %></h3>
            <%= render 'monsters/monster_stat_block', monster: encounter_monster.monster %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class="row mb-3 pb-3 border-bottom">
    <div class="col">

    </div>
  </div>

  <div class="d-flex align-items-center justify-content-start py-3">
    <%= link_to 'Edit', edit_campaign_adventure_encounter_path(@campaign, @adventure, @encounter), class: "btn btn-success" if policy(@encounter).edit? %>
  </div>
</div>
